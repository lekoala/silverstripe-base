(function(e){"use strict";function t(e){i.debug&&console.log("[rf] "+e)}var o=e.document,r={},i={debug:!0,ignoreValidationClass:"ignore-validation"},n={options:{},clickedButton:null};n=function(e,r){this.setOptions(r),this.nodes=o.querySelectorAll(e),this.setRequire(),this.handleFormSubmit(),t("apply on "+e)};n.prototype.forEach=function(e){for(var t=0;t<this.nodes.length;t++)e(this.nodes[t],t)},n.prototype.setOptions=function(e){if(this.options=r,e)for(var t in e)this.options[t]=e[t]},n.prototype.setRequire=function(){var e=this;this.forEach(function(t){for(var o=t.querySelectorAll("[required]"),r=0;r<o.length;r++){var i=o[r],n=i.parentNode;e.options.skipParentClass&&n.classList.contains(e.options.skipParentClass)&&(n=n.parentNode),i.hasAttribute("required")&&(i.removeAttribute("required"),n.classList.add("required"),i.addEventListener("blur",function(){console.log(i)}))}})},n.prototype.handleFormSubmit=function(){var e=this;this.forEach(function(o){for(var r=o.querySelectorAll("[type=submit]"),n=0;n<r.length;n++){var s=r[n];s.addEventListener("click",function(o){e.clickedButton=this,t("click on "+this.name)}),e.clickedButton||(e.clickedButton=s,t("default click on "+s.name))}o.addEventListener("submit",function(r){t("submit");var n=!1;if(e.clickedButton&&e.clickedButton.classList.contains(i.ignoreValidationClass))t("ignore validation");else{var s=o.querySelectorAll(".required");t("validating "+s.length+" elements");for(var l=0;l<s.length;l++){var a=s[l];if("none"!==window.getComputedStyle(a).display){var c=a.querySelectorAll("input");if(c.length>0){for(var u=!1,d=0;d<c.length;d++){var f=c[d];"radio"==f.type||"checkbox"==f.type?f.checked&&(u=!0):f.value&&(u=!0)}u?a.classList.remove("error"):(n=!0,a.classList.add("error"))}else a.classList.remove("error")}else a.classList.remove("error")}if(n){t("Has errors"),r.preventDefault();var p=o.querySelector(".error");p.scrollIntoView()}else t("No errors")}})})},"function"==typeof define&&define.amd?define(function(){return n}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports.RequiredFields=n):e.RequiredFields=n})(this);