(function(e){"use strict";function t(e){n.debug&&console.log("[rf] "+e)}function r(e){if("radio"==e.type||"checkbox"==e.type){if(e.checked)return!0}else if(e.value)return!0;return!1}var i=e.document,o={},n={debug:!1,ignoreValidationClass:"ignore-validation",allRequiredClass:"required-all"},s={options:{},clickedButton:null};s=function(e,r){this.setOptions(r),e instanceof HTMLFormElement?this.nodes=e.querySelectorAll(".required"):this.nodes=i.querySelectorAll(e),this.setRequire(),this.handleFormSubmit(),t("apply on "+e)};s.prototype.forEach=function(e){for(var t=0;t<this.nodes.length;t++)e(this.nodes[t],t)},s.prototype.setOptions=function(e){if(this.options=o,e)for(var t in e)this.options[t]=e[t]},s.prototype.setRequire=function(){var e=this;this.forEach(function(t){for(var r=t.querySelectorAll("[required]"),i=0;i<r.length;i++){var o=r[i],n=o.parentNode;e.options.skipParentClass&&n.classList.contains(e.options.skipParentClass)&&(n=n.parentNode),o.hasAttribute("required")&&(o.removeAttribute("required"),n.classList.add("required"),o.addEventListener("blur",function(){console.log(o)}))}})},s.prototype.handleFormSubmit=function(){var e=this;this.forEach(function(i){for(var o=i.querySelectorAll("[type=submit]"),s=0;s<o.length;s++){var l=o[s];l.addEventListener("click",function(r){e.clickedButton=this,t("click on "+this.name)}),e.clickedButton||(e.clickedButton=l,t("default click on "+l.name))}i.addEventListener("submit",function(o){t("submit");var s=!1;if(e.clickedButton&&e.clickedButton.classList.contains(n.ignoreValidationClass))t("ignore validation");else{var l=i.querySelectorAll(".required");t("validating "+l.length+" elements");for(var a=0;a<l.length;a++){var u=l[a],c=!1;if(u.classList.contains(n.allRequiredClass)&&(c=!0),"none"!==window.getComputedStyle(u).display){var d=u.querySelectorAll("input,textarea,select");if(d.length>0){var f=!1;c&&(f=!0);for(var p=0;p<d.length;p++){var h=d[p];c?r(h)||(f=!1):r(h)&&(f=!0)}f?u.classList.remove("error"):(s=!0,u.classList.add("error"))}else u.classList.remove("error")}else u.classList.remove("error")}if(s){t("Has errors"),o.preventDefault();var v=i.querySelector(".error");v.scrollIntoView()}else t("No errors")}})})},"function"==typeof define&&define.amd?define(function(){return s}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports.RequiredFields=s):e.RequiredFields=s})(this);