"use strict";(()=>{var S=class{static strip(e,t){return e.replace(t,"")}static getPostDelimiter(e,t,i){if(i.length===0)return e.slice(-t.length)===t?t:"";let r="";for(let s=0;s<i.length;s++){let a=i[s];if(e.slice(-a.length)===a){r=a;break}}return r}static getDelimiterREByDelimiter(e){return new RegExp(e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")}static getNextCursorPosition(e,t,i,r,s){return t.length===e?i.length:e+this.getPositionOffset(e,t,i,r,s)}static getPositionOffset(e,t,i,r,s){let a,l,n;return a=this.stripDelimiters(t.slice(0,e),r,s),l=this.stripDelimiters(i.slice(0,e),r,s),n=a.length-l.length,n!==0?n/Math.abs(n):0}static stripDelimiters(e,t,i){if(i.length===0){let r=t?this.getDelimiterREByDelimiter(t):"";return e.replace(r,"")}return i.forEach(r=>{r.split("").forEach(s=>{e=e.replace(this.getDelimiterREByDelimiter(s),"")})}),e}static headStr(e,t){return e.slice(0,t)}static getMaxLength(e){return e.reduce((t,i)=>t+i,0)}static getPrefixStrippedValue(e,t,i,r,s,a,l,n,c){if(i===0)return e;if(e===t&&e!=="")return"";if(c&&e.slice(0,1)=="-"){let d=r.slice(0,1)=="-"?r.slice(1):r;return"-"+this.getPrefixStrippedValue(e.slice(1),t,i,d,s,a,l,n,c)}if(r.slice(0,i)!==t&&!n)return l&&!r&&e?e:"";if(r.slice(-i)!==t&&n)return l&&!r&&e?e:"";let h=this.stripDelimiters(r,s,a);return e.slice(0,i)!==t&&!n?h.slice(i):e.slice(-i)!==t&&n?h.slice(0,-i-1):n?e.slice(0,-i):e.slice(i)}static getFirstDiffIndex(e,t){let i=0;for(;e.charAt(i)===t.charAt(i);)if(e.charAt(i++)==="")return-1;return i}static getFormattedValue(e,t,i,r,s,a){let l="",n=s.length>0,c="";return i===0?e:(t.forEach((h,d)=>{if(e.length>0){let f=e.slice(0,h),u=e.slice(h);n?c=s[a?d-1:d]||c:c=r,a?(d>0&&(l+=c),l+=f):(l+=f,f.length===h&&d<i-1&&(l+=c)),e=u}}),l)}static fixPrefixCursor(e,t,i,r,s=!1){if(!e)return;let a=e.value,l=i||r[0]||" ";!e.setSelectionRange||!t||!s&&t.length+l.length<=a.length||setTimeout(()=>{e.selectionStart=e.selectionEnd=s?e.value.length-t.length:e.value.length},0)}static checkFullSelection(e){try{return(window.getSelection()||document.getSelection()||{}).toString().length===e.length}catch{}return!1}static setSelection(e,t,i){if(e===this.getActiveElement(i)&&!(e&&e.value.length<=t))if(e.createTextRange){let r=e.createTextRange();r.move("character",t),r.select()}else try{e.setSelectionRange(t,t)}catch{console.warn("The input element type does not support selection")}}static getActiveElement(e){let t=e.activeElement;return t&&t.shadowRoot?this.getActiveElement(t.shadowRoot):t}static getDateTimeValue(e,t,i,r){let s=t.getBlocks().length-1,a=r[s],l=t.getMaxStringLength(),n=e.split(a);n.length==1&&e.length>l&&(n=[e.substring(0,l),e.substring(l)]);let c=n[0]?t.getValidatedDate(n[0]):"",h=n[1]?i.getValidatedTime(n[1]):"";return h?e=c+h:e=c,e}},m=S;var I=class{constructor(e,t,i){this.date=[],this.blocks=[],this.datePattern=e,this.dateMin=t.split("-").reverse().map(r=>parseInt(r,10)),this.dateMin.length===2&&this.dateMin.unshift(0),this.dateMax=i.split("-").reverse().map(r=>parseInt(r,10)),this.dateMax.length===2&&this.dateMax.unshift(0),this.initBlocks()}initBlocks(){this.datePattern.forEach(e=>{e==="Y"?this.blocks.push(4):this.blocks.push(2)})}getISOFormatDate(){let e=this.date;return e[2]?e[2]+"-"+this.addLeadingZero(e[1])+"-"+this.addLeadingZero(e[0]):""}getBlocks(){return this.blocks}getMaxStringLength(){return this.getBlocks().reduce(function(e,t){return e+t},0)}getValidatedDate(e){let t="";return e=e.replace(/[^\d]/g,""),this.blocks.forEach((i,r)=>{if(e.length>0){let s=e.slice(0,i),a=s.slice(0,1),l=e.slice(i);switch(this.datePattern[r]){case"d":s==="00"?s="01":parseInt(a,10)>3?s="0"+a:parseInt(s,10)>31&&(s="31");break;case"m":s==="00"?s="01":parseInt(a,10)>1?s="0"+a:parseInt(s,10)>12&&(s="12");break}t+=s,e=l}}),this.getFixedDateString(t)}getFixedDateString(e){let t=this.datePattern,i=[],r=0,s=0,a=0,l=0,n=0,c=0,h,d,f,u=!1;return e.length===4&&t[0].toLowerCase()!=="y"&&t[1].toLowerCase()!=="y"&&(l=t[0]==="d"?0:2,n=2-l,h=parseInt(e.slice(l,l+2),10),d=parseInt(e.slice(n,n+2),10),i=this.getFixedDate(h,d,0)),e.length===8&&(t.forEach((p,x)=>{switch(p){case"d":r=x;break;case"m":s=x;break;default:a=x;break}}),c=a*2,l=r<=a?r*2:r*2+2,n=s<=a?s*2:s*2+2,h=parseInt(e.slice(l,l+2),10),d=parseInt(e.slice(n,n+2),10),f=parseInt(e.slice(c,c+4),10),u=e.slice(c,c+4).length===4,i=this.getFixedDate(h,d,f)),e.length===4&&(t[0]==="y"||t[1]==="y")&&(n=t[0]==="m"?0:2,c=2-n,d=parseInt(e.slice(n,n+2),10),f=parseInt(e.slice(c,c+2),10),u=e.slice(c,c+2).length===2,i=[0,d,f]),e.length===6&&(t[0]==="Y"||t[1]==="Y")&&(n=t[0]==="m"?0:4,c=2-.5*n,d=parseInt(e.slice(n,n+2),10),f=parseInt(e.slice(c,c+4),10),u=e.slice(c,c+4).length===4,i=[0,d,f]),i=this.getRangeFixedDate(i),this.date=i,i.length===0?e:t.reduce((p,x)=>{switch(x){case"d":return p+(i[0]===0?"":this.addLeadingZero(i[0]));case"m":return p+(i[1]===0?"":this.addLeadingZero(i[1]));case"y":return p+(u?this.addLeadingZeroForYear(i[2],!1):"");case"Y":return p+(u?this.addLeadingZeroForYear(i[2],!0):"")}},"")}getRangeFixedDate(e){let t=this.datePattern,i=this.dateMin||[],r=this.dateMax||[];return!e.length||i.length<3&&r.length<3||t.find(s=>s.toLowerCase()==="y")&&e[2]===0?e:r.length&&(r[2]<e[2]||r[2]===e[2]&&(r[1]<e[1]||r[1]===e[1]&&r[0]<e[0]))?r:i.length&&(i[2]>e[2]||i[2]===e[2]&&(i[1]>e[1]||i[1]===e[1]&&i[0]>e[0]))?i:e}getFixedDate(e,t,i){return e=Math.min(e,31),t=Math.min(t,12),i=parseInt(i||0,10),(t<7&&t%2===0||t>8&&t%2===1)&&(e=Math.min(e,t===2?this.isLeapYear(i)?29:28:30)),[e,t,i]}isLeapYear(e){return e%4===0&&e%100!==0||e%400===0}addLeadingZero(e){return(e<10?"0":"")+e}addLeadingZeroForYear(e,t){return t?(e<10?"000":e<100?"00":e<1e3?"0":"")+e:(e<10?"0":"")+e}},C=I;var F=class{constructor(e,t){this.time=[],this.blocks=[],this.timePattern=e,this.timeFormat=t,this.initBlocks()}initBlocks(){this.timePattern.forEach(()=>{this.blocks.push(2)})}getISOFormatTime(){let e=this.time;return e[2]?this.addLeadingZero(e[0])+":"+this.addLeadingZero(e[1])+":"+this.addLeadingZero(e[2]):""}getBlocks(){return this.blocks}getTimeFormatOptions(){return String(this.timeFormat)==="12"?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}}getValidatedTime(e){let t="";e=e.replace(/[^\d]/g,"");let i=this.getTimeFormatOptions();return this.blocks.forEach((r,s)=>{if(e.length>0){let a=e.slice(0,r),l=a.slice(0,1),n=e.slice(r);switch(this.timePattern[s]){case"h":parseInt(l,10)>i.maxHourFirstDigit?a="0"+l:parseInt(a,10)>i.maxHours&&(a=i.maxHours+"");break;case"m":case"s":parseInt(l,10)>i.maxMinutesFirstDigit?a="0"+l:parseInt(a,10)>i.maxMinutes&&(a=i.maxMinutes+"");break}t+=a,e=n}}),this.getFixedTimeString(t)}getFixedTimeString(e){let t=this.timePattern,i=[],r=0,s=0,a=0,l=0,n=0,c=0,h,d,f;return e.length===6&&(t.forEach((u,g)=>{switch(u){case"s":r=g*2;break;case"m":s=g*2;break;case"h":a=g*2;break}}),c=a,n=s,l=r,h=parseInt(e.slice(l,l+2),10),d=parseInt(e.slice(n,n+2),10),f=parseInt(e.slice(c,c+2),10),i=this.getFixedTime(f,d,h)),e.length===4&&this.timePattern.indexOf("s")<0&&(t.forEach((u,g)=>{switch(u){case"m":s=g*2;break;case"h":a=g*2;break}}),c=a,n=s,h=0,d=parseInt(e.slice(n,n+2),10),f=parseInt(e.slice(c,c+2),10),i=this.getFixedTime(f,d,h)),this.time=i,i.length===0?e:t.reduce((u,g)=>{switch(g){case"s":return u+this.addLeadingZero(i[2]);case"m":return u+this.addLeadingZero(i[1]);case"h":return u+this.addLeadingZero(i[0])}},"")}getFixedTime(e,t,i){return i=Math.min(parseInt(i||0,10),60),t=Math.min(t,60),e=Math.min(e,60),[e,t,i]}addLeadingZero(e){return(e<10?"0":"")+e}},O=F;var D={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},w=class{constructor(e,t,i,r,s,a,l,n,c,h){this.numeralDecimalMark=e||".",this.numeralIntegerScale=t>0?t:0,this.numeralDecimalScale=i>=0?i:2,this.numeralThousandsGroupStyle=r||D.thousand,this.numeralPositiveOnly=!!s,this.stripLeadingZeroes=a!==!1,this.prefix=l||l===""?l:"",this.signBeforePrefix=!!n,this.tailPrefix=!!c,this.delimiter=h||h===""?h:",",this.delimiterRE=h?new RegExp("\\"+h,"g"):""}getRawValue(e){return e.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")}padDecimal(e){if(this.numeralDecimalScale===0)return e;e=e.toString();let t=e,i="";if(e.indexOf(this.numeralDecimalMark)>=0){let r=e.split(this.numeralDecimalMark);t=r[0],i=this.numeralDecimalMark+r[1].slice(0,this.numeralDecimalScale)}return t.toString()===""&&(t="0"),i=String(i===""?this.numeralDecimalMark:i).padEnd(this.numeralDecimalScale+this.numeralDecimalMark.length,"0"),t+i}format(e){let t,i,r,s,a="";switch(typeof this.prefix<"u"&&(e=e.replace(this.prefix,"")),e=e.replace(/[A-Za-z]/g,"").replace(this.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",this.numeralPositiveOnly?"":"-").replace("M",this.numeralDecimalMark),this.stripLeadingZeroes&&(e=e.replace(/^(-)?0+(?=\d)/,"$1")),i=e.slice(0,1)==="-"?"-":"",typeof this.prefix<"u"?this.signBeforePrefix?r=i+this.prefix:r=this.prefix+i:r=i,s=e,e.indexOf(this.numeralDecimalMark)>=0&&(t=e.split(this.numeralDecimalMark),s=t[0],a=this.numeralDecimalMark+t[1].slice(0,this.numeralDecimalScale)),i==="-"&&(s=s.slice(1)),this.numeralIntegerScale>0&&(s=s.slice(0,this.numeralIntegerScale)),this.numeralThousandsGroupStyle){case D.lakh:s=s.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+this.delimiter);break;case D.wan:s=s.replace(/(\d)(?=(\d{4})+$)/g,"$1"+this.delimiter);break;case D.thousand:s=s.replace(/(\d)(?=(\d{3})+$)/g,"$1"+this.delimiter);break}return this.tailPrefix?i+s.toString()+(this.numeralDecimalScale>0?a.toString():"")+this.prefix:r+s.toString()+(this.numeralDecimalScale>0?a.toString():"")}},B=w;var _={time:!1,timePattern:["h","m","s"],timeFormat:"24",timeFormatter:null,date:!1,datePattern:["d","m","Y"],dateMin:"",dateMax:"",dateFormatter:null,numeral:!1,numeralIntegerScale:0,numeralDecimalScale:2,numeralDecimalMark:".",numeralThousandsGroupStyle:"thousand",numeralDecimalPadding:!1,numeralPositiveOnly:!1,numeralPositiveStrict:!1,stripLeadingZeroes:!1,signBeforePrefix:!1,tailPrefix:!1,numeralFormatter:null,swapHiddenInput:!1,numericOnly:!1,hexadecimalOnly:!1,uppercase:!1,lowercase:!1,ucfirst:!1,prefix:"",noImmediatePrefix:!1,rawValueTrimPrefix:!1,copyDelimiter:!1,delimiter:"",delimiterLazyShow:!1,delimiters:[],blocks:[],onValueChanged:()=>{},maxLength:0},P=["input","keydown","focus","cut","copy","blur","compositionstart","compositionend"],k=new WeakMap,M=class{constructor(e,t={}){if(!(e instanceof HTMLInputElement)){console.error("Invalid element");return}this.config=Object.assign({},_,{delimiter:this.getDefaultDelimiter(t)},t),(this.isDate()||this.isTime()&&this.config.timeFormat==="24")&&(this.config.numericOnly=!0),(this.config.numericOnly||this.config.numeral)&&!e.hasAttribute("inputmode")&&e.setAttribute("inputmode","decimal"),this.initValue=e.value,this.element=e,k.set(e,this),this.result="",this.init()}static getInstance(e){if(k.has(e))return k.get(e)}isTime(){return this.config.time===!0}isDate(){return this.config.date===!0}isNumeral(){return this.config.numeral===!0}getDefaultDelimiter(e){return e.date&&e.time?[this.getDelimitersFromPattern(e.datePattern,"/")," ",this.getDelimitersFromPattern(e.timePattern,":")].flat():e.date?"/":e.time?":":e.numeral?",":" "}getDelimitersFromPattern(e,t){return e.flatMap(function(i,r){return r==0?[]:t})}init(){this.config.maxLength=m.getMaxLength(this.config.blocks),this.lastInputValue="",this.isBackward="",this.isComposition=!1,this.initSwapHiddenInput(),this.handleEvent=e=>{P.includes(e.type)&&this[`on${e.type}`](e)},P.forEach(e=>{this.element.addEventListener(e,this)}),this.initDateFormatter(),this.initTimeFormatter(),this.initNumeralFormatter(),(this.initValue||this.config.prefix&&!this.config.noImmediatePrefix)&&this.setRawValue(this.initValue)}initSwapHiddenInput(){if(!this.config.swapHiddenInput)return;let e=document.createElement("input");e.type="hidden",e.name=this.element.name,e.value=this.initValue,this.element.parentNode.insertBefore(e,this.element.nextSibling),this.elementSwapHidden=e,this.element.name=`cleave_${this.element.name}`}initNumeralFormatter(){let e=this.config;e.numeral&&(e.numeralFormatter=new B(e.numeralDecimalMark,e.numeralIntegerScale,e.numeralDecimalScale,e.numeralThousandsGroupStyle,e.numeralPositiveOnly,e.stripLeadingZeroes,e.prefix,e.signBeforePrefix,e.tailPrefix,e.delimiter))}initTimeFormatter(){let e=this.config;if(!e.time)return;e.timeFormatter=new O(e.timePattern,e.timeFormat);let t=e.timeFormatter.getBlocks();e.date?e.blocks=e.blocks.concat(t):e.blocks=t,e.maxLength=m.getMaxLength(e.blocks)}initDateFormatter(){let e=this.config;e.date&&(e.dateFormatter=new C(e.datePattern,e.dateMin,e.dateMax),e.blocks=e.dateFormatter.getBlocks(),e.maxLength=m.getMaxLength(e.blocks))}onkeydown(e){let t=this.config,i=e.which||e.keyCode;this.lastInputValue=this.element.value,this.isBackward=i===8}oncompositionstart(e){this.isComposition=!0}oncompositionend(e){this.isComposition=!1,this.oninput(e)}onblur(e){let t=this.config,i=parseFloat(this.getRawValue(!0));if(this.element.value.length>0){if(t.numeral&&(isNaN(i)||t.numeralPositiveStrict&&i===0)){this.result="",this.updateValueState();return}t.numeral&&t.numeralDecimalPadding&&t.numeralDecimalScale>0&&(this.result=t.numeralFormatter.padDecimal(this.element.value),this.updateValueState())}}oninput(e){let t=this.config;if(this.isComposition){this.result=e.target.value,this.updateValueState();return}this.isBackward=this.isBackward||e.inputType==="deleteContentBackward";let i=m.getPostDelimiter(this.lastInputValue,t.delimiter,t.delimiters);this.isBackward&&i?t.postDelimiterBackspace=i:t.postDelimiterBackspace=!1,this.formatInput(this.element.value)}onfocus(){let e=this.config;this.lastInputValue=this.element.value,e.prefix&&e.noImmediatePrefix&&!this.element.value&&this.formatInput(e.prefix),m.fixPrefixCursor(this.element,e.prefix,e.delimiter,e.delimiters,e.tailPrefix)}oncut(e){m.checkFullSelection(this.element.value)&&(this.copyClipboardData(e),this.element.readonly||this.formatInput(""))}oncopy(e){m.checkFullSelection(this.element.value)&&this.copyClipboardData(e)}copyClipboardData(e){let t=this.config,i=this.element.value,r="";t.copyDelimiter?r=i:r=m.stripDelimiters(i,t.delimiter,t.delimiters);try{e.clipboardData?e.clipboardData.setData("Text",r):window.clipboardData.setData("Text",r),e.preventDefault()}catch{}}formatInput(e){let t=this.config,i=m.getPostDelimiter(e,t.delimiter,t.delimiters);if(!t.numeral&&t.postDelimiterBackspace&&!i&&(e=m.headStr(e,e.length-t.postDelimiterBackspace.length)),t.numeral){t.prefix&&t.noImmediatePrefix&&e.length===0?this.result="":this.result=t.numeralFormatter.format(e),this.updateValueState();return}if(t.date&&t.time?e=m.getDateTimeValue(e,t.dateFormatter,t.timeFormatter,t.delimiters):t.date?e=t.dateFormatter.getValidatedDate(e):t.time&&(e=t.timeFormatter.getValidatedTime(e)),e=m.stripDelimiters(e,t.delimiter,t.delimiters),e=m.getPrefixStrippedValue(e,t.prefix,t.prefix.length,this.result,t.delimiter,t.delimiters,t.noImmediatePrefix,t.tailPrefix,t.signBeforePrefix),e=t.numericOnly?m.strip(e,/[^\d]/g):e,e=t.hexadecimalOnly?m.strip(e,/[^0-9a-fA-F]/g):e,e=t.uppercase?e.toUpperCase():e,e=t.lowercase?e.toLowerCase():e,e=t.ucfirst&&e.length>1?e[0].toUpperCase()+e.substring(1).toLowerCase():e,t.prefix&&(t.tailPrefix?e=e+t.prefix:e=t.prefix+e,t.blocks.length===0)){this.result=e,this.updateValueState();return}e=m.headStr(e,t.maxLength),this.result=m.getFormattedValue(e,t.blocks,t.blocks.length,t.delimiter,t.delimiters,t.delimiterLazyShow),this.updateValueState()}updateValueState(){let e=this.config;if(!this.element)return;let t=this.element.selectionEnd,i=this.element.value,r=this.result,s=this.element.ownerDocument;t=m.getNextCursorPosition(t,i,r,e.delimiter,e.delimiters),e.tailPrefix&&t>=i.length&&(t-=e.prefix.length),this.element.value=r,e.swapHiddenInput&&(this.elementSwapHidden.value=this.getRawValue()),m.setSelection(this.element,t,s,!1),this.config.onValueChanged(this)}setRawValue(e){let t=this.config;e=e!=null?e.toString():"",t.numeral&&(e=e.replace(".",t.numeralDecimalMark),t.numeralDecimalPadding&&(e=t.numeralFormatter.padDecimal(e))),t.postDelimiterBackspace=!1,this.element.value=e,this.formatInput(e)}getRawValue(e=!1){let t=this.config,i=this.element.value;return(t.rawValueTrimPrefix||e)&&(i=m.getPrefixStrippedValue(i,t.prefix,t.prefix.length,this.result,t.delimiter,t.delimiters,t.noImmediatePrefix,t.tailPrefix,t.signBeforePrefix)),t.numeral?i=t.numeralFormatter.getRawValue(i):i=m.stripDelimiters(i,t.delimiter,t.delimiters),i}getISOFormatDate(){let e=this.config;return e.date?e.dateFormatter.getISOFormatDate():""}getISOFormatTime(){let e=this.config;return e.time?e.timeFormatter.getISOFormatTime():""}getISOFormatDateTime(){if(this.config.date){let t=this.getISOFormatDate(),i=this.getISOFormatTime()||"00:00:00";return`${t}T${i}`}return""}getFormattedValue(){return this.element.value}destroy(){P.forEach(e=>{this.element.removeEventListener(e,this)}),k.delete(this.element)}toString(){return"[Cleave Object]"}},Z=M;var y=o=>typeof o=="string";var b=o=>o.split(".").reduce((e,t)=>e[t],window);var R=o=>{y(o)&&(o=o[0]=="{"?JSON.parse(o):b(o));for(let[e,t]of Object.entries(o))if(t&&typeof t=="object"){let i=t.__fn;y(i)?o[e]=b(i):R(t)}return o},H=R;var A=o=>{let e=o;do{if(e.nextSibling){o.parsedCallback();return}e=e.parentNode}while(e);setTimeout(()=>{A(o)})},$=A;var V,T=class extends HTMLElement{connectedCallback(){V&&clearTimeout(V),$(this)}disconnectedCallback(){this.disconnected(),V=setTimeout(()=>{this.destroyed(),this.config=null},1e3)}parsedCallback(){this.config||(this.config=H(this.dataset.config||{}),this.created()),this.connected()}created(){}destroyed(){}connected(){}disconnected(){}},N=T;var E=class extends N{get el(){return this.querySelector("input")}get value(){return this.cleave.getRawValue(!0)}created(){let e=this.getAttribute("type");e==="datetime"?(this.config.date=!0,this.config.time=!0):e&&(this.config[e]=!0),this.cleave=new Z(this.el,this.config)}destroyed(){this.cleave&&(this.cleave.destroy(),this.cleave=null)}},L=E;var Y=customElements,G=(o,e)=>{Y.get(o)||Y.define(o,e)};G("cleave-input",L);var ue=L;})();
