(()=>{var I=class{static strip(e,t){return e.replace(t,"")}static getPostDelimiter(e,t,i){if(i.length===0)return e.slice(-t.length)===t?t:"";let r="";for(let s=0;s<i.length;s++){let n=i[s];if(e.slice(-n.length)===n){r=n;break}}return r}static getDelimiterREByDelimiter(e){return new RegExp(e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")}static getNextCursorPosition(e,t,i,r,s){return t.length===e?i.length:e+this.getPositionOffset(e,t,i,r,s)}static getPositionOffset(e,t,i,r,s){let n,l,a;return n=this.stripDelimiters(t.slice(0,e),r,s),l=this.stripDelimiters(i.slice(0,e),r,s),a=n.length-l.length,a!==0?a/Math.abs(a):0}static stripDelimiters(e,t,i){if(i.length===0){let r=t?this.getDelimiterREByDelimiter(t):"";return e.replace(r,"")}return i.forEach(r=>{r.split("").forEach(s=>{e=e.replace(this.getDelimiterREByDelimiter(s),"")})}),e}static headStr(e,t){return e.slice(0,t)}static getMaxLength(e){return e.reduce((t,i)=>t+i,0)}static getPrefixStrippedValue(e,t,i,r,s,n,l,a,c){if(i===0)return e;if(e===t&&e!=="")return"";if(c&&e.slice(0,1)=="-"){let m=r.slice(0,1)=="-"?r.slice(1):r;return"-"+this.getPrefixStrippedValue(e.slice(1),t,i,m,s,n,l,a,c)}if(r.slice(0,i)!==t&&!a)return l&&!r&&e?e:"";if(r.slice(-i)!==t&&a)return l&&!r&&e?e:"";let o=this.stripDelimiters(r,s,n);return e.slice(0,i)!==t&&!a?o.slice(i):e.slice(-i)!==t&&a?o.slice(0,-i-1):a?e.slice(0,-i):e.slice(i)}static getFirstDiffIndex(e,t){let i=0;for(;e.charAt(i)===t.charAt(i);)if(e.charAt(i++)==="")return-1;return i}static getFormattedValue(e,t,i,r,s,n){let l="",a=s.length>0,c="";return i===0?e:(t.forEach((o,m)=>{if(e.length>0){let d=e.slice(0,o),f=e.slice(o);a?c=s[n?m-1:m]||c:c=r,n?(m>0&&(l+=c),l+=d):(l+=d,d.length===o&&m<i-1&&(l+=c)),e=f}}),l)}static fixPrefixCursor(e,t,i,r,s=!1){if(!e)return;let n=e.value,l=i||r[0]||" ";!e.setSelectionRange||!t||!s&&t.length+l.length<=n.length||setTimeout(()=>{e.selectionStart=e.selectionEnd=s?e.value.length-t.length:e.value.length},0)}static checkFullSelection(e){try{return(window.getSelection()||document.getSelection()||{}).toString().length===e.length}catch{}return!1}static setSelection(e,t,i){if(e===this.getActiveElement(i)&&!(e&&e.value.length<=t))if(e.createTextRange){let r=e.createTextRange();r.move("character",t),r.select()}else try{e.setSelectionRange(t,t)}catch{console.warn("The input element type does not support selection")}}static getActiveElement(e){let t=e.activeElement;return t&&t.shadowRoot?this.getActiveElement(t.shadowRoot):t}static getDateTimeValue(e,t,i,r){let s=t.getBlocks().length-1,n=r[s],l=t.getMaxStringLength(),a=e.split(n);a.length==1&&e.length>l&&(a=[e.substring(0,l),e.substring(l)]);let c=a[0]?t.getValidatedDate(a[0]):"",o=a[1]?i.getValidatedTime(a[1]):"";return o?e=c+o:e=c,e}},h=I;var F=class{constructor(e,t,i){this.date=[],this.blocks=[],this.datePattern=e,this.dateMin=t.split("-").reverse().map(r=>parseInt(r,10)),this.dateMin.length===2&&this.dateMin.unshift(0),this.dateMax=i.split("-").reverse().map(r=>parseInt(r,10)),this.dateMax.length===2&&this.dateMax.unshift(0),this.initBlocks()}initBlocks(){this.datePattern.forEach(e=>{e==="Y"?this.blocks.push(4):this.blocks.push(2)})}getISOFormatDate(){let e=this.date;return e[2]?e[2]+"-"+this.addLeadingZero(e[1])+"-"+this.addLeadingZero(e[0]):""}getBlocks(){return this.blocks}getMaxStringLength(){return this.getBlocks().reduce(function(e,t){return e+t},0)}getValidatedDate(e){let t="";return e=e.replace(/[^\d]/g,""),this.blocks.forEach((i,r)=>{if(e.length>0){let s=e.slice(0,i),n=s.slice(0,1),l=e.slice(i);switch(this.datePattern[r]){case"d":s==="00"?s="01":parseInt(n,10)>3?s="0"+n:parseInt(s,10)>31&&(s="31");break;case"m":s==="00"?s="01":parseInt(n,10)>1?s="0"+n:parseInt(s,10)>12&&(s="12");break}t+=s,e=l}}),this.getFixedDateString(t)}getFixedDateString(e){let t=this.datePattern,i=[],r=0,s=0,n=0,l=0,a=0,c=0,o,m,d,f=!1;return e.length===4&&t[0].toLowerCase()!=="y"&&t[1].toLowerCase()!=="y"&&(l=t[0]==="d"?0:2,a=2-l,o=parseInt(e.slice(l,l+2),10),m=parseInt(e.slice(a,a+2),10),i=this.getFixedDate(o,m,0)),e.length===8&&(t.forEach((g,D)=>{switch(g){case"d":r=D;break;case"m":s=D;break;default:n=D;break}}),c=n*2,l=r<=n?r*2:r*2+2,a=s<=n?s*2:s*2+2,o=parseInt(e.slice(l,l+2),10),m=parseInt(e.slice(a,a+2),10),d=parseInt(e.slice(c,c+4),10),f=e.slice(c,c+4).length===4,i=this.getFixedDate(o,m,d)),e.length===4&&(t[0]==="y"||t[1]==="y")&&(a=t[0]==="m"?0:2,c=2-a,m=parseInt(e.slice(a,a+2),10),d=parseInt(e.slice(c,c+2),10),f=e.slice(c,c+2).length===2,i=[0,m,d]),e.length===6&&(t[0]==="Y"||t[1]==="Y")&&(a=t[0]==="m"?0:4,c=2-.5*a,m=parseInt(e.slice(a,a+2),10),d=parseInt(e.slice(c,c+4),10),f=e.slice(c,c+4).length===4,i=[0,m,d]),i=this.getRangeFixedDate(i),this.date=i,i.length===0?e:t.reduce((g,D)=>{switch(D){case"d":return g+(i[0]===0?"":this.addLeadingZero(i[0]));case"m":return g+(i[1]===0?"":this.addLeadingZero(i[1]));case"y":return g+(f?this.addLeadingZeroForYear(i[2],!1):"");case"Y":return g+(f?this.addLeadingZeroForYear(i[2],!0):"")}},"")}getRangeFixedDate(e){let t=this.datePattern,i=this.dateMin||[],r=this.dateMax||[];return!e.length||i.length<3&&r.length<3||t.find(s=>s.toLowerCase()==="y")&&e[2]===0?e:r.length&&(r[2]<e[2]||r[2]===e[2]&&(r[1]<e[1]||r[1]===e[1]&&r[0]<e[0]))?r:i.length&&(i[2]>e[2]||i[2]===e[2]&&(i[1]>e[1]||i[1]===e[1]&&i[0]>e[0]))?i:e}getFixedDate(e,t,i){return e=Math.min(e,31),t=Math.min(t,12),i=parseInt(i||0,10),(t<7&&t%2===0||t>8&&t%2===1)&&(e=Math.min(e,t===2?this.isLeapYear(i)?29:28:30)),[e,t,i]}isLeapYear(e){return e%4===0&&e%100!==0||e%400===0}addLeadingZero(e){return(e<10?"0":"")+e}addLeadingZeroForYear(e,t){return t?(e<10?"000":e<100?"00":e<1e3?"0":"")+e:(e<10?"0":"")+e}},y=F;var w=class{constructor(e,t){this.time=[],this.blocks=[],this.timePattern=e,this.timeFormat=t,this.initBlocks()}initBlocks(){this.timePattern.forEach(()=>{this.blocks.push(2)})}getISOFormatTime(){let e=this.time;return e[2]?this.addLeadingZero(e[0])+":"+this.addLeadingZero(e[1])+":"+this.addLeadingZero(e[2]):""}getBlocks(){return this.blocks}getTimeFormatOptions(){return String(this.timeFormat)==="12"?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}}getValidatedTime(e){let t="";e=e.replace(/[^\d]/g,"");let i=this.getTimeFormatOptions();return this.blocks.forEach((r,s)=>{if(e.length>0){let n=e.slice(0,r),l=n.slice(0,1),a=e.slice(r);switch(this.timePattern[s]){case"h":parseInt(l,10)>i.maxHourFirstDigit?n="0"+l:parseInt(n,10)>i.maxHours&&(n=i.maxHours+"");break;case"m":case"s":parseInt(l,10)>i.maxMinutesFirstDigit?n="0"+l:parseInt(n,10)>i.maxMinutes&&(n=i.maxMinutes+"");break}t+=n,e=a}}),this.getFixedTimeString(t)}getFixedTimeString(e){let t=this.timePattern,i=[],r=0,s=0,n=0,l=0,a=0,c=0,o,m,d;return e.length===6&&(t.forEach((f,u)=>{switch(f){case"s":r=u*2;break;case"m":s=u*2;break;case"h":n=u*2;break}}),c=n,a=s,l=r,o=parseInt(e.slice(l,l+2),10),m=parseInt(e.slice(a,a+2),10),d=parseInt(e.slice(c,c+2),10),i=this.getFixedTime(d,m,o)),e.length===4&&this.timePattern.indexOf("s")<0&&(t.forEach((f,u)=>{switch(f){case"m":s=u*2;break;case"h":n=u*2;break}}),c=n,a=s,o=0,m=parseInt(e.slice(a,a+2),10),d=parseInt(e.slice(c,c+2),10),i=this.getFixedTime(d,m,o)),this.time=i,i.length===0?e:t.reduce((f,u)=>{switch(u){case"s":return f+this.addLeadingZero(i[2]);case"m":return f+this.addLeadingZero(i[1]);case"h":return f+this.addLeadingZero(i[0])}},"")}getFixedTime(e,t,i){return i=Math.min(parseInt(i||0,10),60),t=Math.min(t,60),e=Math.min(e,60),[e,t,i]}addLeadingZero(e){return(e<10?"0":"")+e}},V=w;var x={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},M=class{constructor(e,t,i,r,s,n,l,a,c,o){this.numeralDecimalMark=e||".",this.numeralIntegerScale=t>0?t:0,this.numeralDecimalScale=i>=0?i:2,this.numeralThousandsGroupStyle=r||x.thousand,this.numeralPositiveOnly=!!s,this.stripLeadingZeroes=n!==!1,this.prefix=l||l===""?l:"",this.signBeforePrefix=!!a,this.tailPrefix=!!c,this.delimiter=o||o===""?o:",",this.delimiterRE=o?new RegExp("\\"+o,"g"):""}getRawValue(e){return e.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")}padDecimal(e){if(this.numeralDecimalScale===0)return e;e=e.toString();let t=e,i="";return e.indexOf(this.numeralDecimalMark)>=0&&(parts=e.split(this.numeralDecimalMark),t=parts[0],i=this.numeralDecimalMark+parts[1].slice(0,this.numeralDecimalScale)),t.toString()===""&&(t="0"),i=String(i===""?this.numeralDecimalMark:i).padEnd(this.numeralDecimalScale+this.numeralDecimalMark.length,"0"),t+i}format(e){let t,i,r,s,n="";switch(typeof this.prefix<"u"&&(e=e.replace(this.prefix,"")),e=e.replace(/[A-Za-z]/g,"").replace(this.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",this.numeralPositiveOnly?"":"-").replace("M",this.numeralDecimalMark),this.stripLeadingZeroes&&(e=e.replace(/^(-)?0+(?=\d)/,"$1")),i=e.slice(0,1)==="-"?"-":"",typeof this.prefix<"u"?this.signBeforePrefix?r=i+this.prefix:r=this.prefix+i:r=i,s=e,e.indexOf(this.numeralDecimalMark)>=0&&(t=e.split(this.numeralDecimalMark),s=t[0],n=this.numeralDecimalMark+t[1].slice(0,this.numeralDecimalScale)),i==="-"&&(s=s.slice(1)),this.numeralIntegerScale>0&&(s=s.slice(0,this.numeralIntegerScale)),this.numeralThousandsGroupStyle){case x.lakh:s=s.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+this.delimiter);break;case x.wan:s=s.replace(/(\d)(?=(\d{4})+$)/g,"$1"+this.delimiter);break;case x.thousand:s=s.replace(/(\d)(?=(\d{3})+$)/g,"$1"+this.delimiter);break}return this.tailPrefix?i+s.toString()+(this.numeralDecimalScale>0?n.toString():"")+this.prefix:r+s.toString()+(this.numeralDecimalScale>0?n.toString():"")}},T=M;var O={time:!1,timePattern:["h","m","s"],timeFormat:"24",timeFormatter:null,date:!1,datePattern:["d","m","Y"],dateMin:"",dateMax:"",dateFormatter:null,numeral:!1,numeralIntegerScale:0,numeralDecimalScale:2,numeralDecimalMark:".",numeralThousandsGroupStyle:"thousand",numeralDecimalPadding:!1,numeralPositiveOnly:!1,numeralPositiveStrict:!1,stripLeadingZeroes:!1,signBeforePrefix:!1,tailPrefix:!1,numeralFormatter:null,swapHiddenInput:!1,numericOnly:!1,hexadecimalOnly:!1,uppercase:!1,lowercase:!1,ucfirst:!1,prefix:"",noImmediatePrefix:!1,rawValueTrimPrefix:!1,copyDelimiter:!1,delimiter:"",delimiterLazyShow:!1,delimiters:[],blocks:[],onValueChanged:()=>{},maxLength:0},b=["input","keydown","focus","cut","copy","blur","compositionstart","compositionend"],S=new WeakMap,P=class{constructor(e,t={}){if(!(e instanceof HTMLInputElement)){console.error("Invalid element");return}this.config=Object.assign({},O,{delimiter:this.getDefaultDelimiter(t)},t),(this.isDate()||this.isTime()&&this.config.timeFormat==="24")&&(this.config.numericOnly=!0),(this.config.numericOnly||this.config.numeral)&&!e.hasAttribute("inputmode")&&e.setAttribute("inputmode","decimal"),this.initValue=e.value,this.element=e,S.set(e,this),this.result="",this.init()}static getInstance(e){if(S.has(e))return S.get(e)}isTime(){return this.config.time===!0}isDate(){return this.config.date===!0}isNumeral(){return this.config.numeral===!0}getDefaultDelimiter(e){return e.date&&e.time?[this.getDelimitersFromPattern(e.datePattern,"/")," ",this.getDelimitersFromPattern(e.timePattern,":")].flat():e.date?"/":e.time?":":e.numeral?",":" "}getDelimitersFromPattern(e,t){return e.flatMap(function(i,r){return r==0?[]:t})}init(){this.config.maxLength=h.getMaxLength(this.config.blocks),this.lastInputValue="",this.isBackward="",this.isComposition=!1,this.initSwapHiddenInput(),this.handleEvent=e=>{b.includes(e.type)&&this[`on${e.type}`](e)},b.forEach(e=>{this.element.addEventListener(e,this)}),this.initDateFormatter(),this.initTimeFormatter(),this.initNumeralFormatter(),(this.initValue||this.config.prefix&&!this.config.noImmediatePrefix)&&this.formatInput(this.initValue)}initSwapHiddenInput(){if(!this.config.swapHiddenInput)return;let e=document.createElement("input");e.type="hidden",e.name=this.element.name,e.value=this.initValue,this.element.parentNode.insertBefore(e,this.element.nextSibling),this.elementSwapHidden=e,this.element.name=`cleave_${this.element.name}`}initNumeralFormatter(){let e=this.config;e.numeral&&(e.numeralFormatter=new T(e.numeralDecimalMark,e.numeralIntegerScale,e.numeralDecimalScale,e.numeralThousandsGroupStyle,e.numeralPositiveOnly,e.stripLeadingZeroes,e.prefix,e.signBeforePrefix,e.tailPrefix,e.delimiter))}initTimeFormatter(){let e=this.config;if(!e.time)return;e.timeFormatter=new V(e.timePattern,e.timeFormat);let t=e.timeFormatter.getBlocks();e.date?e.blocks=e.blocks.concat(t):e.blocks=t,e.maxLength=h.getMaxLength(e.blocks)}initDateFormatter(){let e=this.config;e.date&&(e.dateFormatter=new y(e.datePattern,e.dateMin,e.dateMax),e.blocks=e.dateFormatter.getBlocks(),e.maxLength=h.getMaxLength(e.blocks))}onkeydown(e){let t=this.config,i=e.which||e.keyCode;this.lastInputValue=this.element.value,this.isBackward=i===8}oncompositionstart(e){this.isComposition=!0}oncompositionend(e){this.isComposition=!1,this.oninput(e)}onblur(e){let t=this.config,i=parseFloat(this.getRawValue(!0));if(t.numeral&&this.element.value.length>0&&(isNaN(i)||t.numeralPositiveStrict&&i===0)){this.result="",this.updateValueState();return}t.numeral&&t.numeralDecimalPadding&&t.numeralDecimalScale>0&&(this.result=t.numeralFormatter.padDecimal(this.element.value),this.updateValueState())}oninput(e){let t=this.config;if(this.isComposition){this.result=e.target.value,this.updateValueState();return}this.isBackward=this.isBackward||e.inputType==="deleteContentBackward";let i=h.getPostDelimiter(this.lastInputValue,t.delimiter,t.delimiters);this.isBackward&&i?t.postDelimiterBackspace=i:t.postDelimiterBackspace=!1,this.formatInput(this.element.value)}onfocus(){let e=this.config;this.lastInputValue=this.element.value,e.prefix&&e.noImmediatePrefix&&!this.element.value&&this.formatInput(e.prefix),h.fixPrefixCursor(this.element,e.prefix,e.delimiter,e.delimiters,e.tailPrefix)}oncut(e){h.checkFullSelection(this.element.value)&&(this.copyClipboardData(e),this.element.readonly||this.formatInput(""))}oncopy(e){h.checkFullSelection(this.element.value)&&this.copyClipboardData(e)}copyClipboardData(e){let t=this.config,i=this.element.value,r="";t.copyDelimiter?r=i:r=h.stripDelimiters(i,t.delimiter,t.delimiters);try{e.clipboardData?e.clipboardData.setData("Text",r):window.clipboardData.setData("Text",r),e.preventDefault()}catch{}}formatInput(e){let t=this.config,i=h.getPostDelimiter(e,t.delimiter,t.delimiters);if(!t.numeral&&t.postDelimiterBackspace&&!i&&(e=h.headStr(e,e.length-t.postDelimiterBackspace.length)),t.numeral){t.prefix&&t.noImmediatePrefix&&e.length===0?this.result="":this.result=t.numeralFormatter.format(e),this.updateValueState();return}if(t.date&&t.time?e=h.getDateTimeValue(e,t.dateFormatter,t.timeFormatter,t.delimiters):t.date?e=t.dateFormatter.getValidatedDate(e):t.time&&(e=t.timeFormatter.getValidatedTime(e)),e=h.stripDelimiters(e,t.delimiter,t.delimiters),e=h.getPrefixStrippedValue(e,t.prefix,t.prefix.length,this.result,t.delimiter,t.delimiters,t.noImmediatePrefix,t.tailPrefix,t.signBeforePrefix),e=t.numericOnly?h.strip(e,/[^\d]/g):e,e=t.hexadecimalOnly?h.strip(e,/[^0-9a-fA-F]/g):e,e=t.uppercase?e.toUpperCase():e,e=t.lowercase?e.toLowerCase():e,e=t.ucfirst&&e.length>1?e[0].toUpperCase()+e.substring(1).toLowerCase():e,t.prefix&&(t.tailPrefix?e=e+t.prefix:e=t.prefix+e,t.blocks.length===0)){this.result=e,this.updateValueState();return}e=h.headStr(e,t.maxLength),this.result=h.getFormattedValue(e,t.blocks,t.blocks.length,t.delimiter,t.delimiters,t.delimiterLazyShow),this.updateValueState()}updateValueState(){let e=this.config;if(!this.element)return;let t=this.element.selectionEnd,i=this.element.value,r=this.result,s=this.element.ownerDocument;t=h.getNextCursorPosition(t,i,r,e.delimiter,e.delimiters),e.tailPrefix&&t===i.length&&(t-=e.prefix.length),this.element.value=r,e.swapHiddenInput&&(this.elementSwapHidden.value=this.getRawValue()),h.setSelection(this.element,t,s,!1),this.config.onValueChanged(this)}setRawValue(e){let t=this.config;e=e!=null?e.toString():"",t.numeral&&(e=e.replace(".",t.numeralDecimalMark)),t.postDelimiterBackspace=!1,this.element.value=e,this.formatInput(e)}getRawValue(e=!1){let t=this.config,i=this.element.value;return(t.rawValueTrimPrefix||e)&&(i=h.getPrefixStrippedValue(i,t.prefix,t.prefix.length,this.result,t.delimiter,t.delimiters,t.noImmediatePrefix,t.tailPrefix,t.signBeforePrefix)),t.numeral?i=t.numeralFormatter.getRawValue(i):i=h.stripDelimiters(i,t.delimiter,t.delimiters),i}getISOFormatDate(){let e=this.config;return e.date?e.dateFormatter.getISOFormatDate():""}getISOFormatTime(){let e=this.config;return e.time?e.timeFormatter.getISOFormatTime():""}getISOFormatDateTime(){if(this.config.date){let t=this.getISOFormatDate(),i=this.getISOFormatTime()||"00:00:00";return`${t}T${i}`}return""}getFormattedValue(){return this.element.value}destroy(){b.forEach(e=>{this.element.removeEventListener(e,this)}),S.delete(this.element)}toString(){return"[Cleave Object]"}},E=P;var L=0,k=class extends HTMLElement{connectedCallback(){L++;let e={},t=this.dataset.config;t&&(e=Object.assign(e,JSON.parse(t)));let i=this.getInput(),r=i.getAttribute("id")||`cleave-input-${L}`;i.setAttribute("id",r);let s=this.getAttribute("type")||null;s&&(s==="datetime"?(e.date=!0,e.time=!0):e[s]=!0),this.cleave=new E(i,e)}disconnectedCallback(){this.cleave.destroy()}getCleave(){return this.cleave}getInput(){return this.querySelector("input")}};customElements.define("cleave-input",k);var j=k;})();
