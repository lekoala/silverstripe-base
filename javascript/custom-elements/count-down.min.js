"use strict";(()=>{function f(t){for(let[e,i]of Object.entries(t))if(i&&typeof i=="object"){let n=i.__fn;n?typeof n=="string"?t[e]=n.split(".").reduce((o,s)=>o[s],window):Array.isArray(n)&&(t[e]=new Function(n[0],n[1])):f(i)}return t}function c(t){let e=t;do{if(e.nextSibling){t.parsedCallback();return}e=e.parentNode}while(e);setTimeout(()=>{c(t)})}var l,u=class extends HTMLElement{connectedCallback(){l&&clearTimeout(l),c(this)}disconnectedCallback(){this.disconnected(),l=setTimeout(()=>{this.destroyed(),this.config=null},1e3)}parsedCallback(){this.config||(this.config=f(JSON.parse(this.dataset.config||"{}")),this.created()),this.connected()}created(){}destroyed(){}connected(){}disconnected(){}},T=u;function d(t,e=null){e||(e=new Date);let i=e instanceof Date?e.getTime():e;return t.seconds&&(i+=1e3*t.seconds),t.minutes&&(i+=1e3*60*t.minutes),t.hours&&(i+=1e3*60*60*t.hours),t.days&&(i+=1e3*60*60*24*t.days),new Date(i)}function v(t){let e=t instanceof Date?t.getTime():t;return{days:Math.floor(e/(1e3*60*60*24)),hours:Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(e%(1e3*60*60)/(1e3*60)),seconds:Math.floor(e%(1e3*60)/1e3)}}function h(t){return t?t instanceof Date?t:new Date(t):new Date}function C(t,e,i){return e=e||t,i.nodeType==1&&(e=`:scope ${e}`),e}function x(t,e=null,i=document){return i.querySelector(C(t,e,i))}function g(t,e="default",i=null){let n=customElements.get("locale-provider");return n?Object.assign(i||{},n.for(t,e)):i}var M="count-down";function p(t,e=2){return t.toString().padStart(e,"0")}function S(t,e,i=2){let n={seconds:60,minutes:60,hours:24,days:1},o=0,s=!1;for(let[r,D]of Object.entries(n)){let a=t[r];r==e?(o+=a,s=!0):s?o+=a*D:o+=a/D}return(Math.round(o*100)/100).toFixed(i)}function m(t,e){let i=v(t.diff);if(e.config.unit)t[e.config.unit]=S(i,e.config.unit,e.config.decimalDigits);else{let n=e.config.pad?2:1;t.days=i.days,t.hours=p(i.hours,n),t.minutes=p(i.minutes,n),t.seconds=p(i.seconds,n)}for(let[n,o]of Object.entries(e.config.labels)){let s=x(`.${n} .value`,null,e);s&&s.innerHTML!=t[n]&&(s.innerHTML=t[n])}}var y=class extends T{created(){this.config=Object.assign({locale:this.dataset.locale||"default",timer:!0,pad:!0,decimalDigits:0,labels:{days:"d",hours:"h",minutes:"m",seconds:"s"},interval:1e3},this.config),this.config.labels=g(M,this.config.locale,this.config.labels),this.dataset.start&&(this.config.start=this.dataset.start),this.dataset.end&&(this.config.end=this.dataset.end),this.dataset.url&&(this.config.url=this.dataset.url),typeof this.config.start=="object"&&(this.config.start=d(this.config.start)),typeof this.config.end=="object"&&(this.config.end=d(this.config.end));let e=h(this.config.start),i=h(this.config.end);if(!e||!i)return;this.firstChild||(this.innerHTML=Object.keys(this.config.labels).reduce((s,r)=>this.config.unit&&this.config.unit!=r?s:`${s} <span class="${r}"><span class="value"></span><span class="label">${this.config.labels[r]}</span></span>`,""));let n=new Date().getTime()-e.getTime(),o={};o.diff=i.getTime()-e.getTime(),m(o,this),this.config.timer&&(this.config.onInit&&this.config.onInit(this),this.interval=setInterval(()=>{if(o.diff<=0){clearInterval(this.interval),o.diff=0,m(o,this),this.config.onComplete&&this.config.onComplete(this),this.config.reloadOnComplete?window.location.reload():this.config.url&&window.location.replace(this.config.url);return}m(o,this),this.config.onTick&&this.config.onTick(this,o);let s=new Date;o.diff=i.getTime()-s.getTime()+n},this.config.interval))}destroyed(){this.interval&&clearInterval(this.interval)}},b=y;var k=customElements;function w(t,e){k.get(t)||k.define(t,e)}w("count-down",b);var G=b;})();
