"use strict";(()=>{var k={allowNew:!1,showAllSuggestions:!1,badgeStyle:"primary",allowClear:!1,clearEnd:!1,selected:[],regex:"",separator:[],max:0,clearLabel:"Clear",searchLabel:"Type a value",keepOpen:!1,allowSame:!1,baseClass:"",placeholder:"",addOnBlur:!1,showDisabled:!1,hideNativeValidation:!1,suggestionsThreshold:1,maximumItems:0,autoselectFirst:!0,updateOnSelect:!1,highlightTyped:!1,fullWidth:!1,fixed:!1,activeClasses:["bg-primary","text-white"],labelField:"label",valueField:"value",queryParam:"query",server:"",serverMethod:"GET",serverParams:{},fetchOptions:{},liveServer:!1,noCache:!0,debounceTime:300,notFoundMessage:"",onRenderItem:(o,e,t)=>e,onSelectItem:(o,e)=>{},onClearItem:(o,e)=>{},onCreateItem:(o,e)=>{},onBlur:(o,e)=>{},onFocus:(o,e)=>{},onCanAdd:(o,e,t)=>{},onServerResponse:(o,e)=>o.json()},b="tags-",F="is-loading",O="is-active",f="is-invalid",E="show",m="data-value",v="next",w="prev",M="form-control-focus",D="form-placeholder-shown",H="form-control-disabled",S=new WeakMap,N=0;function K(o,e=300){let t;return(...s)=>{clearTimeout(t),t=setTimeout(()=>{o.apply(this,s)},e)}}function Z(o,e=null){let t=document.createElement("span");document.body.appendChild(t),t.style.fontSize=e||"inherit",t.style.height="auto",t.style.width="auto",t.style.position="absolute",t.style.whiteSpace="no-wrap",t.innerHTML=o;let s=Math.ceil(t.clientWidth);return document.body.removeChild(t),s}function V(o){return o.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function y(o){o.style.display="none",o.ariaHidden="true"}function B(o){o.style.display="list-item",o.ariaHidden="false"}var p=class{constructor(e,t={}){if(!(e instanceof HTMLElement)){console.error("Invalid element",e);return}S.set(e,this),N++,this._selectElement=e,this._willBlur=null,this._configure(t),this._keyboardNavigation=!1,this._searchFunc=K(()=>{this._loadFromServer(!0)},this._config.debounceTime),this._fireEvents=!0,this._configureParent(),this._holderElement=document.createElement("div"),this._containerElement=document.createElement("div"),this._holderElement.appendChild(this._containerElement),this._selectElement.parentElement.insertBefore(this._holderElement,this._selectElement),this._configureHolderElement(),this._configureContainerElement(),this._configureSelectElement(),this._configureSearchInput(),this._configureDropElement(),this.resetState(),this._config.fixed&&(document.addEventListener("scroll",this,!0),window.addEventListener("resize",this)),this._searchInput.addEventListener("focus",this),this._searchInput.addEventListener("blur",this),this._searchInput.addEventListener("input",this),this._searchInput.addEventListener("keydown",this),this._dropElement.addEventListener("mousemove",this),this.loadData()}static init(e="select[multiple]",t={}){let s=document.querySelectorAll(e);for(let n=0;n<s.length;n++)p.getInstance(s[n])||new p(s[n],t)}static getInstance(e){if(S.has(e))return S.get(e)}dispose(){this._searchInput.removeEventListener("focus",this),this._searchInput.removeEventListener("blur",this),this._searchInput.removeEventListener("input",this),this._searchInput.removeEventListener("keydown",this),this._dropElement.removeEventListener("mousemove",this),this._config.fixed&&(document.removeEventListener("scroll",this,!0),window.removeEventListener("resize",this)),this._selectElement.style.display="block",this._holderElement.parentElement.removeChild(this._holderElement),this.parentForm&&this.parentForm.removeEventListener("reset",this),S.delete(this._selectElement)}handleEvent(e){this[`on${e.type}`](e)}_configure(e={}){this._config=Object.assign({},k);let t={...e,...this._selectElement.dataset},s=n=>["true","false","1","0",!0,!1].includes(n)&&!!JSON.parse(n);for(let[n,a]of Object.entries(k)){if(t[n]===void 0)continue;let i=t[n];switch(typeof a){case"number":this._config[n]=parseInt(i);break;case"boolean":this._config[n]=s(i);break;case"string":this._config[n]=i.toString();break;case"object":if(Array.isArray(a)){let l=i.includes("|")?"|":",";this._config[n]=typeof i=="string"?i.split(l):i}else this._config[n]=typeof i=="string"?JSON.parse(i):i;break;case"function":this._config[n]=typeof i=="string"?i.split(".").reduce((l,r)=>l[r],window):i,this._config[n]||console.error("Invalid function",i);break;default:this._config[n]=i;break}}this._config.placeholder||(this._config.placeholder=this._getPlaceholder())}config(e=null){return e?this._config[e]:this._config}_configureParent(){for(this.overflowParent=null,this.parentForm=this._selectElement.parentElement;this.parentForm&&(this.parentForm.style.overflow==="hidden"&&(this.overflowParent=this.parentForm),this.parentForm=this.parentForm.parentElement,!(this.parentForm&&this.parentForm.nodeName=="FORM")););this.parentForm&&this.parentForm.addEventListener("reset",this)}_getPlaceholder(){if(this._selectElement.hasAttribute("placeholder"))return this._selectElement.getAttribute("placeholder");if(this._selectElement.dataset.placeholder)return this._selectElement.dataset.placeholder;let e=this._selectElement.querySelector("option");return!e||!this._config.autoselectFirst?"":(e.hasAttribute("selected")&&e.removeAttribute("selected"),e.value?"":e.textContent)}_configureSelectElement(){this._config.hideNativeValidation?(this._selectElement.style.position="absolute",this._selectElement.style.left="-9999px"):this._selectElement.style.cssText="height:1px;width:1px;opacity:0;padding:0;margin:0;border:0;float:left;flex-basis:100%;",this._selectElement.tabIndex=-1,this._selectElement.addEventListener("focus",e=>{this.onclick(e)}),this._selectElement.addEventListener("invalid",e=>{this._holderElement.classList.add(f)})}_configureDropElement(){this._dropElement=document.createElement("ul"),this._dropElement.classList.add("dropdown-menu",b+"menu","p-0"),this._dropElement.setAttribute("id",b+"menu-"+N),this._dropElement.setAttribute("role","menu"),this._dropElement.style.maxHeight="280px",this._config.fullWidth||(this._dropElement.style.maxWidth="360px"),this._config.fixed&&(this._dropElement.style.position="fixed"),this._dropElement.style.overflowY="auto",this._dropElement.style.overscrollBehavior="contain",this._dropElement.style.textAlign="unset",this._dropElement.addEventListener("mouseenter",e=>{this._keyboardNavigation=!1}),this._holderElement.appendChild(this._dropElement),this._searchInput.setAttribute("aria-controls",this._dropElement.getAttribute("id"))}_configureHolderElement(){this._holderElement.classList.add("form-control","dropdown"),this._selectElement.classList.contains("form-select-lg")&&this._holderElement.classList.add("form-control-lg"),this._selectElement.classList.contains("form-select-sm")&&this._holderElement.classList.add("form-control-sm"),this.overflowParent&&(this._holderElement.style.position="inherit"),this._getBootstrapVersion()===4&&(this._holderElement.style.height="auto"),this._holderElement.addEventListener("click",this)}_configureContainerElement(){this._containerElement.addEventListener("click",t=>{this.isDisabled()||this._searchInput.style.visibility!="hidden"&&this._searchInput.focus()}),this._containerElement.style.display="flex",this._containerElement.style.alignItems="center",this._containerElement.style.flexWrap="wrap";let e=this._selectElement.selectedOptions||[];for(let t=0;t<e.length;t++){let s=e[t];s.value&&(s.setAttribute("selected","selected"),s.dataset.init="true",s.hasAttribute("disabled")&&(s.dataset.disabled="true"),s.hasAttribute("title")&&(s.dataset.title=s.getAttribute("title")),this._createBadge(s.textContent,s.value,s.dataset))}}_configureSearchInput(){this._searchInput=document.createElement("input"),this._searchInput.type="text",this._searchInput.autocomplete="off",this._searchInput.spellcheck=!1,this._searchInput.ariaAutoComplete="list",this._searchInput.ariaExpanded="false",this._searchInput.ariaHasPopup="menu",this._searchInput.setAttribute("role","combobox"),this._searchInput.ariaLabel=this._config.searchLabel,this._searchInput.style.cssText="background-color:transparent;color:currentColor;border:0;padding:0;outline:0;max-width:100%",this.resetSearchInput(!0),this._containerElement.appendChild(this._searchInput)}onfocus(e){this._willBlur&&clearTimeout(this._willBlur),this._holderElement.classList.add(M),this.showOrSearch(),this._config.onFocus(e,this)}onblur(e){this._willBlur=setTimeout(()=>{this._abortController&&this._abortController.abort();let t=!0;if(this._config.addOnBlur&&this._searchInput.value&&(t=this._enterValue()),this._holderElement.classList.remove(M),this.hideSuggestions(t),this._fireEvents){let s=this.getSelection(),n={selection:s?s.dataset.value:null,input:this._searchInput.value};this._config.onBlur(e,this),this._selectElement.dispatchEvent(new CustomEvent("tags.blur",{bubbles:!0,detail:n}))}},100)}oninput(e){let t=this._searchInput.value;if(t){let s=t.slice(-1);if(this._config.separator.length&&this._config.separator.includes(s)){this._searchInput.value=this._searchInput.value.slice(0,-1);let n=this._searchInput.value,a=n,i={};if(this._config.allowNew)i.new=1;else{let l=this.getSelection();if(!l)return;n=l.getAttribute(m),a=l.dataset.label}this._add(a,n,i);return}}setTimeout(()=>{this._adjustWidth()}),this.showOrSearch()}onkeydown(e){let t=e.keyCode||e.key,s=e.target;switch(e.keyCode==229&&(t=s.value.charAt(s.selectionStart-1).charCodeAt(0)),t){case 13:case"Enter":e.preventDefault(),this._enterValue();break;case 38:case"ArrowUp":e.preventDefault(),this._keyboardNavigation=!0,this._moveSelection(w);break;case 40:case"ArrowDown":e.preventDefault(),this._keyboardNavigation=!0,this.isDropdownVisible()?this._moveSelection(v):this.showOrSearch(!1);break;case 8:case"Backspace":this._searchInput.value.length==0&&(this.removeLastItem(),this._adjustWidth(),this.showOrSearch());break;case 27:case"Escape":this._searchInput.focus(),this.hideSuggestions();break}}onmousemove(e){this._keyboardNavigation=!1}onscroll(e){this._positionMenu()}onresize(e){this._positionMenu()}onclick(e=null){e&&e.preventDefault(),!(this.isSingle()||this.isMaxReached())&&this._searchInput.focus()}onreset(e){this.reset()}loadData(){this._config.server?this._config.liveServer||this._loadFromServer():this.resetSuggestions()}resetState(){this.isDisabled()?(this._holderElement.setAttribute("readonly",""),this._searchInput.setAttribute("disabled",""),this._holderElement.classList.add(H)):(this._holderElement.hasAttribute("readonly")&&this._holderElement.removeAttribute("readonly"),this._searchInput.hasAttribute("disabled")&&this._searchInput.removeAttribute("disabled"),this._holderElement.classList.remove(H))}resetSuggestions(){let e=Array.from(this._selectElement.children).filter(t=>t instanceof HTMLOptGroupElement||!t.disabled||this._config.showDisabled).map(t=>t instanceof HTMLOptGroupElement?{group:t.getAttribute("label"),items:t.children}:{value:t.getAttribute("value"),label:t.textContent,disabled:t.disabled,data:Object.assign(t.dataset)});this._buildSuggestions(e)}_enterValue(){let e=this.getSelection();if(e)return e.click(),!0;if(this._config.allowNew&&this._searchInput.value){let t=this._searchInput.value;return!!this._add(t,t,{new:1})}return!1}_loadFromServer(e=!1){this._abortController&&this._abortController.abort(),this._abortController=new AbortController;let t=Object.assign({},this._config.serverParams);if(t[this._config.queryParam]=this._searchInput.value,this._config.noCache&&(t.t=Date.now()),t.related){let i=document.getElementById(t.related);i&&(t.related=i.value)}let s=new URLSearchParams(t),n=this._config.server,a=Object.assign(this._config.fetchOptions,{method:this._config.serverMethod||"GET",signal:this._abortController.signal});a.method==="POST"?a.body=s:n+="?"+s.toString(),this._holderElement.classList.add(F),fetch(n,a).then(i=>this._config.onServerResponse(i,this)).then(i=>{let l=i.data||i;this._buildSuggestions(l),this._abortController=null,e&&this._showSuggestions()}).catch(i=>{i.name!=="AbortError"&&console.error(i)}).finally(i=>{this._holderElement.classList.remove(F)})}_add(e,t=null,s={}){if(!this.canAdd(e,s))return null;let n=this.addItem(e,t,s);return this._config.keepOpen?this._showSuggestions():this.resetSearchInput(),n}_isItemEnabled(e){if(e.style.display==="none")return!1;let t=e.firstElementChild;return t.tagName==="A"&&!t.classList.contains("disabled")}_moveSelection(e=v,t=null){let s=this.getSelection();if(s){let n=e===v?"nextSibling":"previousSibling";t=s.parentNode;do t=t[n];while(t&&!this._isItemEnabled(t));t?s.classList.remove(...this._activeClasses()):s&&(t=s.parentElement)}else{if(e===w)return t;if(!t)for(t=this._dropElement.firstChild;t&&!this._isItemEnabled(t);)t=t.nextSibling}if(t){let n=t.offsetHeight,a=t.offsetTop,i=t.parentNode,l=i.offsetHeight,r=i.scrollHeight,h=i.offsetTop;if(n===0&&setTimeout(()=>{i.scrollTop=0}),e===w){let u=a-h>10?a-h:0;i.scrollTop=u}else a+n-(l+i.scrollTop)>0&&n>0&&(i.scrollTop=a+n-l+1,i.scrollTop+l>=r-10&&(i.scrollTop=a-h));let c=t.querySelector("a");c.classList.add(...this._activeClasses()),this._searchInput.setAttribute("aria-activedescendant",c.getAttribute("id")),this._config.updateOnSelect&&(this._searchInput.value=c.dataset.label,this._adjustWidth())}else this._searchInput.setAttribute("aria-activedescendant","");return t}_adjustWidth(){this._holderElement.classList.remove(D),this._searchInput.value?this._searchInput.size=this._searchInput.value.length:this.getSelectedValues().length?(this._searchInput.placeholder="",this._searchInput.size=1):(this._searchInput.size=this._config.placeholder.length>0?this._config.placeholder.length:1,this._searchInput.placeholder=this._config.placeholder,this._holderElement.classList.add(D));let e=this._searchInput.value||this._searchInput.placeholder,t=window.getComputedStyle(this._holderElement).fontSize,s=Z(e,t)+16;this._searchInput.style.width=s+"px"}_buildSuggestions(e){for(;this._dropElement.lastChild;)this._dropElement.removeChild(this._dropElement.lastChild);let t=0,s=1;for(let n=0;n<e.length;n++){let a=e[n];if(a.group){let i=document.createElement("li");i.setAttribute("role","presentation"),i.dataset.id=""+s;let l=document.createElement("span");if(i.append(l),l.classList.add("dropdown-header","text-truncate"),l.innerHTML=a.group,this._dropElement.appendChild(i),a.items)for(let r=0;r<a.items.length;r++){let h=a.items[r];h.group_id=s,this._buildSuggestionsItem(a.items[r],t),t++}s++}this._buildSuggestionsItem(a,t),t++}if(this._config.notFoundMessage){let n=document.createElement("li");n.setAttribute("role","presentation"),n.classList.add(b+"not-found"),n.innerHTML='<span class="dropdown-item"></span>',this._dropElement.appendChild(n)}}_buildSuggestionsItem(e,t){if(!e[this._config.valueField])return;let s=e[this._config.valueField],n=e[this._config.labelField];if(this._config.server&&!this._config.liveServer&&(e.selected||this._config.selected.includes(s))){let r=this._add(n,s,e.data);r&&(r.dataset.init="true")}let a=this._config.onRenderItem(e,n,this),i=document.createElement("li");i.setAttribute("role","presentation"),e.group_id&&i.setAttribute("data-group-id",""+e.group_id);let l=document.createElement("a");i.append(l),l.setAttribute("id",this._dropElement.getAttribute("id")+"-"+t),l.classList.add("dropdown-item","text-truncate"),e.disabled&&l.classList.add("disabled"),l.setAttribute(m,s),l.setAttribute("data-label",n),l.setAttribute("href","#"),l.innerHTML=a,this._dropElement.appendChild(i),l.addEventListener("mouseenter",r=>{this._keyboardNavigation||(this.removeSelection(),i.querySelector("a").classList.add(...this._activeClasses()))}),l.addEventListener("mousedown",r=>{r.preventDefault()}),l.addEventListener("click",r=>{r.preventDefault(),this._add(n,s,e.data),this._config.onSelectItem(e,this)})}initialOptions(){return this._selectElement.querySelectorAll("option[data-init]")}reset(){this.removeAll(),this._fireEvents=!1;let e=this.initialOptions();for(let t=0;t<e.length;t++){let s=e[t];this.addItem(s.textContent,s.value,s.dataset)}this._adjustWidth(),this._fireEvents=!0}resetSearchInput(e=!1){this._searchInput.value="",this._adjustWidth(),e||(this.hideSuggestions(),this._searchInput===document.activeElement&&this._searchInput.dispatchEvent(new Event("input"))),this.isMaxReached()?this._searchInput.style.visibility="hidden":this._searchInput.style.visibility=="hidden"&&(this._searchInput.style.visibility="visible"),this.isSingle()&&!e&&document.activeElement.blur()}getSelectedValues(){let e=this._selectElement.querySelectorAll("option[selected]");return Array.from(e).map(t=>t.value)}getAvailableValues(){let e=this._selectElement.querySelectorAll("option");return Array.from(e).map(t=>t.value)}showOrSearch(e=!0){if(e&&!this._shouldShow()){this.hideSuggestions(!1);return}this._config.liveServer?this._searchFunc():this._showSuggestions()}hideSuggestions(e=!0){this._dropElement.classList.remove(E),this._searchInput.ariaExpanded="false",this.removeSelection(),e&&this._holderElement.classList.remove(f)}toggleSuggestions(e=!0,t=!0){this._dropElement.classList.contains(E)?this.hideSuggestions(t):this.showOrSearch(e)}_shouldShow(){return this.isDisabled()||this._config.maximumItems>0&&this.getSelectedValues().length>=this._config.maximumItems?!1:this._searchInput.value.length>=this._config.suggestionsThreshold}_showSuggestions(){if(this._searchInput.style.visibility=="hidden")return;let e=V(this._searchInput.value).toLowerCase(),t=this.getSelectedValues(),s=this._dropElement.querySelectorAll("li"),n=0,a=null,i=!1,l={};for(let r=0;r<s.length;r++){let h=s[r],c=h.firstElementChild;if(c instanceof HTMLSpanElement){h.dataset.id&&(l[h.dataset.id]=!1),y(h);continue}if(c.classList.remove(...this._activeClasses()),!this._config.allowSame&&t.indexOf(c.getAttribute(m))!=-1){y(h);continue}let u=V(c.textContent).toLowerCase(),d=e.length>0?u.indexOf(e):-1,_=d>=0||e.length===0&&this._config.suggestionsThreshold===0,X=this._config.showAllSuggestions||e.length===0,Y=_||e.length===0;if(X||_?(n++,B(h),h.dataset.groupId&&(l[h.dataset.groupId]=!0),!a&&this._isItemEnabled(h)&&Y&&(a=h),this._config.maximumItems>0&&n>this._config.maximumItems&&y(h)):y(h),this._config.highlightTyped&&_){let g=c.textContent,Q=g.substring(0,d)+`<mark>${g.substring(d,d+e.length)}</mark>`+g.substring(d+e.length,g.length);c.innerHTML=Q}this._isItemEnabled(h)&&(i=!0)}if(!this._config.allowNew&&!(e.length===0&&!i)&&this._holderElement.classList.add(f),this._config.allowNew&&this._config.regex&&this.isInvalid()&&this._holderElement.classList.remove(f),Array.from(s).filter(r=>r.dataset.id).forEach(r=>{l[r.dataset.id]===!0&&B(r)}),i&&(this._holderElement.classList.remove(f),a&&this._config.autoselectFirst&&(this.removeSelection(),this._moveSelection(v,a))),n===0)if(this._config.notFoundMessage){let r=this._dropElement.querySelector("."+b+"not-found");r.style.display="block";let h=this._config.notFoundMessage.replace("{{tag}}",this._searchInput.value);r.innerHTML=`<span class="dropdown-item">${h}</span>`,this._showDropdown()}else this.hideSuggestions(!1);else this._showDropdown()}_showDropdown(){this._dropElement.classList.add(E),this._searchInput.ariaExpanded="true",this._positionMenu()}_positionMenu(){let e=window.getComputedStyle(this._searchInput),t=this._searchInput.getBoundingClientRect(),s=e.direction==="rtl",n=null,a=null;if(this._config.fixed?(this._config.fullWidth?n=this._holderElement.getBoundingClientRect().x:n=t.x,a=t.y+t.height):this._config.fullWidth?n=0:n=this._searchInput.offsetLeft,s&&!this._config.fullWidth&&(n-=this._dropElement.offsetWidth-t.width),!this._config.fullWidth){let h=Math.min(window.innerWidth,document.body.offsetWidth),c=s?t.x+t.width-this._dropElement.offsetWidth-1:h-1-(t.x+this._dropElement.offsetWidth);c<0&&(n=s?n-c:n+c)}this._dropElement.style.transform="unset",this._config.fullWidth&&(this._dropElement.style.width=this._holderElement.offsetWidth+"px"),n!==null&&(this._dropElement.style.left=n+"px"),a!==null&&(this._dropElement.style.top=a+"px");let i=this._dropElement.getBoundingClientRect(),l=Math.min(window.innerHeight,document.body.offsetHeight);l-1-(i.y+i.height)<0&&t.y>l/2&&(this._dropElement.style.transform="translateY(calc(-100% - "+this._searchInput.offsetHeight+"px))")}_getBootstrapVersion(){let e=5;return window.jQuery&&$.fn.tooltip!=null&&$.fn.tooltip.Constructor!=null&&(e=parseInt($.fn.tooltip.Constructor.VERSION.charAt(0))),e}_isSelected(e){let t=Array.from(this._selectElement.querySelectorAll("option")).find(s=>s.textContent==e);return!!(t&&t.getAttribute("selected"))}_validateRegex(e){return new RegExp(this._config.regex.trim()).test(e)}getSelection(){return this._dropElement.querySelector("a."+O)}removeSelection(){let e=this.getSelection();e&&e.classList.remove(...this._activeClasses())}_activeClasses(){return[...this._config.activeClasses,O]}getActiveSelection(){return this.getSelection()}removeActiveSelection(){return this.removeSelection()}removeAll(){this.getSelectedValues().forEach(t=>{this.removeItem(t,!0)}),this._adjustWidth()}removeLastItem(e=!1){let t=this._containerElement.querySelectorAll("span:not(.disabled)");if(!t.length)return;let s=t[t.length-1];this.removeItem(s.getAttribute(m),e)}enable(){this._selectElement.setAttribute("disabled",""),this.resetState()}disable(){this._selectElement.removeAttribute("disabled"),this.resetState()}isDisabled(){return this._selectElement.hasAttribute("disabled")||this._selectElement.disabled||this._selectElement.hasAttribute("readonly")}isDropdownVisible(){return this._dropElement.classList.contains(E)}isInvalid(){return this._holderElement.classList.contains(f)}isSingle(){return!this._selectElement.hasAttribute("multiple")}isMaxReached(){return this._config.max&&this.getSelectedValues().length>=this._config.max}canAdd(e,t={}){return!e||this.isDisabled()||!this.isSingle()&&!this._config.allowSame&&this._isSelected(e)||this.isMaxReached()?!1:this._config.regex&&t.new&&!this._validateRegex(e)?(this._holderElement.classList.add(f),!1):this._config.onCanAdd&&this._config.onCanAdd(e,t,this)===!1?(this._holderElement.classList.add(f),!1):!0}addItem(e,t=null,s={}){t||(t=e),this.isSingle()&&this.getSelectedValues().length&&this.removeLastItem(!0);let n=CSS.escape(t),a=this._selectElement.querySelectorAll('option[value="'+n+'"]'),i=null;if(this._config.allowSame?a.forEach(r=>{r.textContent===e&&!r.selected&&(i=r)}):i=a[0]||null,!i){i=document.createElement("option"),i.value=t,i.textContent=e;for(let[r,h]of Object.entries(s))i.dataset[r]=h;this._selectElement.appendChild(i),this._config.onCreateItem(i,this)}i&&(s=Object.assign({title:i.getAttribute("title")},s,i.dataset)),i.setAttribute("selected","selected"),i.selected=!0;let l=this._selectElement.innerHTML;return this._selectElement.innerHTML="",this._selectElement.innerHTML=l,this._createBadge(e,t,s),this._fireEvents&&this._selectElement.dispatchEvent(new Event("change",{bubbles:!0})),i}_createBadge(e,t=null,s={}){let n=this._getBootstrapVersion(),a=this._config.allowClear&&!s.disabled,i=e,l=document.createElement("span"),r=["badge"],h=this._config.badgeStyle;if(s.badgeStyle&&(h=s.badgeStyle),s.badgeClass&&r.push(...s.badgeClass.split(" ")),this._config.baseClass?r.push(...this._config.baseClass.split(" ")):n===5?r=[...r,"bg-"+h,"mw-100","overflow-x-hidden"]:r=[...r,"badge-"+h],s.disabled&&r.push("disabled","opacity-50"),l.style.margin="2px 6px 2px 0px",l.style.marginBlock="2px",l.style.marginInline="0px 6px",l.classList.add(...r),l.setAttribute(m,t),s.title&&l.setAttribute("title",s.title),a){let c=r.includes("text-dark")?"btn-close":"btn-close-white",u,d;this._config.clearEnd?(u=n===5?"ms-2":"ml-2",d=n===5?"float-end":"float:right;"):(u=n===5?"me-2":"mr-2",d=n===5?"float-start":"float:left;"),i=(n===5?'<button type="button" style="font-size:0.65em" class="'+u+" "+d+" btn-close "+c+'" aria-label="'+this._config.clearLabel+'"></button>':'<button type="button" style="font-size:1em;'+d+'text-shadow:none;color:currentColor;transform:scale(1.2)" class="'+u+' close" aria-label="'+this._config.clearLabel+'"><span aria-hidden="true">&times;</span></button>')+i}l.innerHTML=i,this._containerElement.insertBefore(l,this._searchInput),window.bootstrap&&window.bootstrap.Tooltip&&window.bootstrap.Tooltip.getOrCreateInstance(l),a&&l.querySelector("button").addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),this.isDisabled()||(this.removeItem(t),document.activeElement.blur(),this._adjustWidth())})}removeItem(e,t=!1){let s=CSS.escape(e),n=this._containerElement.querySelector("span["+m+'="'+s+'"]');if(!n)return;n.remove();let a=this._selectElement.querySelector('option[value="'+s+'"][selected]');a&&(a.removeAttribute("selected"),a.selected=!1,this._fireEvents&&!t&&this._selectElement.dispatchEvent(new Event("change",{bubbles:!0}))),this._searchInput.style.visibility=="hidden"&&!this.isMaxReached()&&(this._searchInput.style.visibility="visible"),t||this._config.onClearItem(e,this)}},W=p;var I=o=>typeof o=="string";var L=o=>o.split(".").reduce((e,t)=>e[t],window);var P=o=>{I(o)&&(o=o[0]=="{"?JSON.parse(o):L(o));for(let[e,t]of Object.entries(o))if(t&&typeof t=="object"){let s=t.__fn;I(s)?o[e]=L(s):P(t)}return o},R=P;var q=o=>{let e=o;do{if(e.nextSibling){o.parsedCallback();return}e=e.parentNode}while(e);setTimeout(()=>{q(o)})},j=q;var C,A=class extends HTMLElement{connectedCallback(){C&&clearTimeout(C),j(this)}disconnectedCallback(){this.disconnected(),C=setTimeout(()=>{this.destroyed(),this.config=null},1e3)}parsedCallback(){this.config||(this.config=R(this.dataset.config||{}),this.created()),this.connected()}created(){}destroyed(){}connected(){}disconnected(){}},z=A;var G=(o,e)=>{e=typeof e=="string"?[e]:e,e.forEach(t=>{o.querySelectorAll(t).forEach(s=>{s.remove()})})};var x=class extends z{get el(){return this.querySelector("select")}get value(){return this.el.value}created(){G(this,"div.dropdown"),this.tags=new W(this.el,this.config)}destroyed(){this.tags.dispose(),this.tags=null}},T=x;var U=customElements,J=(o,e)=>{U.get(o)||U.define(o,e)};J("bs-tags",T);var be=T;})();
